@page "/"
@using System.Web
@using RPinto.Services
@using RPinto.Models
@inject IJSRuntime js



@if (mainInfo == null && skillsList == null & leftSkillsList == null & rightSkillsList == null & workExperiencesList == null & educationsList == null & portfoliosList == null & referencesList == null)
{
    <div id="app">
        <svg class="loading-progress">
            <circle r="40%" cx="50%" cy="50%" />
            <circle r="40%" cx="50%" cy="50%" />
        </svg>
        <div class="loading-progress-text"></div>
    </div>
}
else
{
    <!DOCTYPE html>
    <html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Material Resume</title>
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="crossorigin" />
        <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&amp;family=Roboto:wght@300;400;500;700&amp;display=swap" />
        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&amp;family=Roboto:wght@300;400;500;700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript>
            <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&amp;family=Roboto:wght@300;400;500;700&amp;display=swap" />
        </noscript>
        <link href="css/font-awesome/css/all.min.css?ver=1.2.1" rel="stylesheet">
        <link href="css/mdb.min.css?ver=1.2.1" rel="stylesheet">
        <link href="css/aos.css?ver=1.2.1" rel="stylesheet">
        <link href="css/main.css?ver=1.2.1" rel="stylesheet">
        <noscript>
            <style type="text/css">
                [data-aos] {
                    opacity: 1 !important;
                    transform: translate(0) scale(1) !important;
                }
            </style>
        </noscript>

    </head>
    <body class="bg-light" id="top">
        <header class="d-print-none">
            <div class="container text-center text-lg-left">
                <div class="pt-4 clearfix">
                    <h1 class="site-title mb-0">@mainInfo.Name</h1>
                    <div class="site-nav">
                        <nav role="navigation">
                            <ul class="nav justify-content-center">
                                <li class="nav-item">
                                    <a class="nav-link" href="#about" title="About"><span class="menu-title">About</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#skills" title="Skills"><span class="menu-title">Skills</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#experience" title="Experience"><span class="menu-title">Experience</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#education" title="Education"><span class="menu-title">Education</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#portfolio" title="Portfolio"><span class="menu-title">Portfolio</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#references" title="References"><span class="menu-title">References</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#contact" title="Contact"><span class="menu-title">Contact</span></a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </header>
        <div class="page-content">
            <div class="container">
                <div class="resume-container">
                    <div class="shadow-1-strong bg-white my-5" id="intro">
                        <div class="bg-info text-white">
                            <div class="cover bg-image">
                                <img src="images/header-background.jpg" />
                                <div class="mask" style="background-color: rgba(0, 0, 0, 0.7);backdrop-filter: blur(2px);">
                                    <div class="text-center p-5">
                                        <div class="avatar p-1"><img class="img-thumbnail shadow-2-strong" src="@mainInfo.ProfilePhoto" width="160" height="160" /></div>
                                        <div class="header-bio mt-3">
                                            <div data-aos="zoom-in" data-aos-delay="0">
                                                <h2 class="h1">@mainInfo.Name</h2>
                                                <p>@mainInfo.Description</p>
                                            </div>
                                            <div class="header-social mb-3 d-print-none" data-aos="zoom-in" data-aos-delay="200">
                                                <nav role="navigation">
                                                    <ul class="nav justify-content-center">
                                                        <li class="nav-item">
                                                            <a class="nav-link" href="@mainInfo.LinkedinAddress" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i><span class="menu-title sr-only">Linkedin</span></a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" href="@mainInfo.FacebookUrl" target="_blank" title="Facebook"><i class="fab fa-facebook"></i><span class="menu-title sr-only">Facebook</span></a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" href="@mainInfo.InstagramUrl" target="_blank" title="Instagram"><i class="fab fa-instagram"></i><span class="menu-title sr-only">Instagram</span></a>
                                                        </li>
                                                        <li class="nav-item">
                                                            <a class="nav-link" href="@mainInfo.GitUrl" target="_blank" title="Github"><i class="fab fa-github"></i><span class="menu-title sr-only">Github</span></a>
                                                        </li>
                                                    </ul>
                                                </nav>
                                            </div>
                                            <div class="d-print-none"><a class="btn btn-outline-light btn-lg shadow-sm mt-1 me-3" href="@mainInfo.CV_Url" target="_blank" data-aos="fade-right" data-aos-delay="700">Download CV</a><a class="btn btn-info btn-lg shadow-sm mt-1" href="mailto:@mainInfo.Email" data-aos="fade-left" data-aos-delay="700">Hire Me</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5" id="about">
                        <div class="about-section">
                            <div class="row">
                                <div class="col-md-6">
                                    <h2 class="h2 fw-light mb-4">About Me</h2>
                                    <p> @((MarkupString)mainInfo.About_Me)</p>
                                </div>
                                <div class="col-md-5 offset-lg-1">
                                    <div class="row mt-2">
                                        <h2 class="h2 fw-light mb-4">Bio</h2>
                                        <div class="col-sm-5">
                                            <div class="pb-2 fw-bolder"><i class="far fa-calendar-alt pe-2 text-muted" style="width:24px;opacity:0.85;"></i> Age</div>
                                        </div>
                                        <div class="col-sm-7">
                                            <div class="pb-2">@mainInfo.Age</div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="pb-2 fw-bolder"><i class="far fa-envelope pe-2 text-muted" style="width:24px;opacity:0.85;"></i> Email</div>
                                        </div>
                                        <div class="col-sm-7">
                                            <div class="pb-2">@mainInfo.Email</div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="pb-2 fw-bolder"><i class="fab fa-linkedin pe-2 text-muted" style="width:24px;opacity:0.85;"></i> Linkedin</div>
                                        </div>
                                        <div class="col-sm-7">
                                            <div class="pb-2" href="@mainInfo.LinkedinAddress" title="Linkedin">@mainInfo.LinkedinName</div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="pb-2 fw-bolder"><i class="fas fa-phone pe-2 text-muted" style="width:24px;opacity:0.85;"></i> Phone</div>
                                        </div>

                                        <div class="col-sm-7">
                                            <div class="pb-2">@mainInfo.Phone</div>
                                        </div>
                                        <div class="col-sm-5">
                                            <div class="pb-2 fw-bolder"><i class="fas fa-map-marker-alt pe-2 text-muted" style="width:24px;opacity:0.85;"></i> Address</div>
                                        </div>
                                        <div class="col-sm-7">
                                            <div class="pb-2">@mainInfo.Address</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5" id="skills">
                        <div class="skills-section">
                            <h2 class="h2 fw-light mb-4">Professional Skills</h2>
                            <div class="row">
                                <div class="col-md-6">

                                    @foreach (var item in leftSkillsList)
                                    {
                                        <div class="mb-3">
                                            <span class="fw-bolder">@item.Name</span>
                                            <div class="progress my-2 rounded" style="height: 20px">
                                                <div class="progress-bar bg-info" role="progressbar" data-aos="zoom-in-right" data-aos-delay="100" data-aos-anchor=".skills-section" style="width: @((MarkupString)item.Percent)%;" aria-valuenow="@((MarkupString)item.Percent)" aria-valuemin="0" aria-valuemax="100">@item.Level</div>
                                            </div>
                                        </div>
                                    }


                                </div>
                                <div class="col-md-6">

                                    @foreach (var item in rightSkillsList)
                                    {

                                        if (item != null)
                                        {
                                            <div class="mb-3">
                                                <span class="fw-bolder">@item.Name</span>
                                                <div class="progress my-2 rounded" style="height: 20px">
                                                    <div class="progress-bar bg-secondary" role="progressbar" data-aos="zoom-in-right" data-aos-delay="400" data-aos-anchor=".skills-section" style="width: @((MarkupString)item.Percent)%;" aria-valuenow="@((MarkupString)item.Percent)" aria-valuemin="0" aria-valuemax="100">@item.Level</div>
                                                </div>
                                            </div>
                                        }
                                    }

                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5" id="experience">
                        <div class="work-experience-section">
                            <h2 class="h2 fw-light mb-4">Work Experience</h2>
                            <div class="timeline">
                                @foreach (var item in workExperiencesList)
                                {
                                    <div class="timeline-card timeline-card-info" data-aos="fade-in" data-aos-delay="0">
                                        <div class="timeline-head px-4 pt-3">
                                            <div class="h5">@item.Title <span class="text-muted h6">at @item.CompanyName</span></div>
                                        </div>
                                        <div class="timeline-body px-4 pb-4">
                                            <div class="text-muted text-small mb-3">@item.StartDate - @item.EndDate</div>
                                            <div>@item.Description</div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5" id="education">
                        <div class="education-section">
                            <h2 class="h2 fw-light mb-4">Education</h2>
                            <div class="timeline">
                                @foreach (var item in educationsList)
                                {
                                    <div class="timeline-card timeline-card-success" data-aos="fade-in" data-aos-delay="0">
                                        <div class="timeline-head px-4 pt-3">
                                            <div class="h5">@item.Title <span class="text-muted h6">from @item.SchoolName</span></div>
                                        </div>
                                        <div class="timeline-body px-4 pb-4">
                                            <div class="text-muted text-small mb-3">2011 - 2013</div>
                                            <div>@item.Description</div>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5 d-print-none" id="portfolio">
                        <div class="portfolio-section">
                            <h2 class="h2 fw-light mb-4">Portfolio</h2>
                            @foreach (var item in portfoliosList)
                            {
                                if (toTheLeft)
                                {
                                    <div class="row g-0">
                                        <div class="col-md-6"><a href="@item.Url" target="_blank"><img class="img-fluid" src="@item.Image" width="800" height="500" /></a></div>
                                        <div class="col-md-6 d-flex align-items-center" data-aos="fade-left" data-aos-delay="100">
                                            <div class="m-4 mt-md-2">
                                                <p class="text-teal text-small">@item.Tecnologies</p>
                                                <h3>@item.Title</h3>
                                                <p class="text-muted">@item.Description</p>
                                            </div>
                                        </div>
                                    </div>
                                }
                                else
                                {
                                    <div class="row g-0 portfolio-reverse">
                                        <div class="col-md-6 d-flex align-items-center" data-aos="fade-right" data-aos-delay="100">
                                            <div class="m-4 mt-md-2 text-end">
                                                <p class="text-teal text-small">@item.Tecnologies</p>
                                                <h3>@item.Title</h3>
                                                <p class="text-muted">@item.Description</p>
                                            </div>
                                        </div>
                                        <div class="col-md-6"><a href="@item.Url" target="_blank"><img class="img-fluid" src="@item.Image" width="800" height="500" /></a></div>
                                    </div>
                                }
                                toTheLeft = !toTheLeft;
                            }

                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5" id="references">
                        <div class="reference-section">
                            <h2 class="h2 fw-light mb-4">References</h2>

                            <div class="main-carousel">
                                @foreach (var item in referencesList)
                                {
                                    <div class="carousel-cell">
                                        <div>
                                            <div class="d-flex mb-2">
                                                <div class="avatar"><a href="@item.Url" target="_blank"><img src="@item.PersonPhoto" width="60" height="60" /></a></div>
                                                <div class="header-bio m-3 mb-0">
                                                    <h3 class="h6 mb-1" data-aos="fade-left" data-aos-delay="0">@item.PersonName</h3>
                                                    <p class="text-muted text-small" data-aos="fade-left" data-aos-delay="100">@item.JobTitle</p>
                                                </div>
                                            </div>
                                            <div class="d-flex">
                                                <i class="text-secondary fas fa-quote-left"></i>
                                                <p class="lead mx-2" data-aos="fade-left" data-aos-delay="100">@item.ReferenceText</p>
                                            </div>
                                        </div>
                                    </div>
                                }
                            </div>

                        </div>
                    </div>
                    <div class="shadow-1-strong bg-white my-5 p-5" id="contact">
                        <div class="contant-section">
                            <h2 class="h2 fw-light text mb-4">Contact</h2>

                            <div class="row mb-4">
                                <div class="mt-1">
                                    <div class="h6"><i class="fas fa-phone pe-2 text-muted" style="width:24px;opacity:0.85;"></i>@mainInfo.Phone</div>
                                    <div class="h6"><i class="far fa-envelope pe-2 text-muted" style="width:24px;opacity:0.85;"></i><a href="mailto:@mainInfo.Email" target="_blank">@mainInfo.Email</a></div>
                                    <div class="h6"><i class="fab fa-linkedin pe-2 text-muted" style="width:24px;opacity:0.85;"></i><a href="@mainInfo.LinkedinAddress" target="_blank">@mainInfo.LinkedinName</a></div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <footer class="pt-4 pb-4 text-muted text-center d-print-none">
            <div class="container">
                <div class="my-3">
                    <div class="h4">@mainInfo.Name</div>
                    <div class="footer-nav">
                        <nav role="navigation">
                            <ul class="nav justify-content-center">
                                <li class="nav-item">
                                    <a class="nav-link" href="@mainInfo.LinkedinAddress" title="Linkedin"><i class="fab fa-linkedin"></i><span class="menu-title sr-only">Linkedin</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="@mainInfo.FacebookUrl" title="Facebook"><i class="fab fa-facebook"></i><span class="menu-title sr-only">Facebook</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="@mainInfo.InstagramUrl" title="Instagram"><i class="fab fa-instagram"></i><span class="menu-title sr-only">Instagram</span></a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="@mainInfo.GitUrl" title="Github"><i class="fab fa-github"></i><span class="menu-title sr-only">Github</span></a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </footer>



        <script>
            var elem = document.querySelector('.main-carousel');
            var flkty = new Flickity(elem, {
                // options
                cellAlign: 'left',
                contain: true,
                autoPlay: 5000,
                prevNextButtons: false
            });
        </script>

    </body>



    </html>


}

@code
{

    private MainInfo? mainInfo;
    private List<Skill>? skillsList;
    private Skill[]? leftSkillsList;
    private Skill[]? rightSkillsList;
    private List<WorkExperience>? workExperiencesList;
    private List<Education>? educationsList;
    private List<Portfolio>? portfoliosList;
    private List<Reference>? referencesList;

    private decimal numberPerColumn = 0;

    private bool toTheLeft = true;

    protected override async Task OnInitializedAsync()
    {
        MongoDB_Service service = new MongoDB_Service();
        mainInfo = await service.GetMainInfo();
        skillsList = await service.GetSkills();
        workExperiencesList = await service.GetWorkExperience();
        educationsList = await service.GetEducation();
        portfoliosList = await service.GetPortfolio();
        portfoliosList = await service.GetPortfolio();
        referencesList = await service.GetReferences();

        numberPerColumn = Math.Ceiling((decimal)skillsList.Count / 2);
        leftSkillsList = new Skill[(int)numberPerColumn];
        rightSkillsList = new Skill[(int)numberPerColumn];

        skillsList.CopyTo(0, leftSkillsList, 0, (int)numberPerColumn);
        skillsList.CopyTo((int)numberPerColumn, rightSkillsList, 0, (int)numberPerColumn - 1);


    }
}
